<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIK Classes - Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- For FontAwesome icons -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7fc;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .header {
            display: flex;
            align-items: center; /* Align items vertically in the header */
            justify-content: flex-start; /* Align logo and title to the left */
            padding: 10px 20px; /* Reduced padding for smaller height */
            background-color: #00aacc;
            color: white;
            position: relative;
            height: 50px; /* Reduced height for a smaller status bar */
        }

        /* Circular Logo styling */
        .logo {
            width: 40px; /* Adjust logo size */
            height: 40px;
            margin-right: 10px; /* Space between the logo and title */
            border-radius: 50%; /* Circular shape */
            overflow: hidden; /* Ensure the image fits within the circle */
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensure the image covers the circle */
        }

        .logo-text {
            font-size: 24px; /* Logo text size */
            font-weight: bold;
            word-wrap: break-word;
        }

        /* Thought of the Day (quote) box styling */
        #quote {
    font-size: 22px;
    color: #333;
    background-color: #fff;
    padding: 5px 15px;
    margin: 10px auto; /* Automatically center the quote */
    display: block; /* Make it block-level for centering */
    border-radius: 15px; /* Slight rounded corners */
    box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    line-height: 1.5;
    background: linear-gradient(135deg, #f9f9f9, #eaf1f1); /* Soft gradient for elegance */
    position: relative;
    max-width: 80%; /* Control width */
    text-align: center;
}

/* Style the quotation marks */
#quote:before, #quote:after {
    content: "“";
    font-size: 40px;
    position: absolute;
    color: #4CAF50;
    font-weight: bold;
}

#quote:before {
    top: -10px;
    left: -15px; /* Positioned closer to the quote */
}

#quote:after {
    content: "”";
    font-size: 40px;
    position: absolute;
    bottom: -10px;
    right: -15px; /* Positioned closer to the quote */
}

/* Hover effect */
#quote:hover {
    transform: scale(1.02); /* Slight zoom effect */
    transition: transform 0.3s ease-in-out;
}


        .main-content {
            padding: 20px;
            text-align: center;
        }

        .features {
            font-size: 18px;
            color: #555;
            margin-top: 10px;
        }

        /* Profile icon and welcome message styling */
        .profile-container {
            display: flex;
            align-items: center;
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%); /* Ensure it stays centered */
        }

        #profile-icon {
            width: 30px; /* Smaller size for the profile icon */
            height: 30px; /* Smaller size for the profile icon */
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            margin-right: 10px;
        }

        #profile-icon img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        #user-welcome {
            font-size: 15px;
            color: rgb(0, 0, 0);
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            
        }

        /* Homework Section */
        .homework-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            position: relative; /* Enable positioning of children relative to this container */
        }

        .add-homework-btn {
            font-size: 30px;
            background-color: #f0940a;
            color: white;
            border-radius: 50%;
            border: none;
            padding: 15px; /* Equal padding to ensure a circular shape */
            cursor: pointer;
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px; /* Ensure equal width and height for perfect circle */
            height: 60px; /* Ensure equal width and height for perfect circle */
            display: flex;
            align-items: center; /* Center the + icon vertically */
            justify-content: center; /* Center the + icon horizontally */
        }

        .homework-list {
            margin-top: 20px;
        }

        .homework-item {
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            display: flex;
            justify-content: space-between; /* Make space for delete button */
            align-items: center;
        }

        .delete-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .delete-btn:hover {
            background-color: #d32f2f;
        }

        /* Modal for Homework */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
        }

        .modal input,
        .modal select,
        .modal textarea,
        .modal button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .modal button {
            background-color: #86dd0b;
            color: white;
            border: none;
            cursor: pointer;
        }

        .modal button:hover {
            background-color: #45a049;
        }
        /* Taskbar styling */
        .taskbar {
            display: flex;
            justify-content: center;
            background-color: #333;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
            letter-spacing: 5px;
        }

        .status-bar-item {
            padding: 0 15px;
        }

        .status-bar-item a {
            color: white;
            font-size: 24px;
            text-decoration: none;
        }

        .status-bar-item a:hover {
            color: #4CAF50;
        }

        @media (max-width: 600px) {
            /* Adjust the font size of the logo and quote for mobile screens */
            .logo-text {
                font-size: 22px;
            }

            #quote {
                font-size: 16px;
            }

            #user-welcome {
                font-size: 12px;
            }
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .container {
            text-align: center;
            margin: 50px auto;
        }
        .upload-icon {
            font-size: 50px;
            cursor: pointer;
            color: #4caf50;
        }
        .modall {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modall-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .file-input {
            margin: 15px 0;
        }
        .close-btn {
            background-color: #f44336;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .upload-btn {
            background-color: #4caf50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .file-preview {
            margin-top: 20px;
        }
        .file-preview img {
            width: 100px;
            height: 100px;
            object-fit: cover;
        }
        .file-preview a {
            display: inline-block;
            margin-top: 10px;
            text-decoration: none;
            color: #007bff;
        }
        .uploaded-files {
            margin-top: 40px;
            display: flex;
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            padding: 0 20px;
        }
        .file-item {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 10px;
            background-color: #fff;
            text-align: center;
            margin-bottom: 20px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            width: 100%; 
            max-width: 400px; 
            position: relative;
        }
        .file-item img {
            max-width: 100%;
            max-height: 150px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        .file-item a {
            margin-top: 10px;
            text-decoration: none;
            color: #007bff;
        }
        .file-item a:hover {
            text-decoration: underline;
        }
        .delete-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            color: #f44336;
            cursor: pointer;
        }
        /* Progress Bar */
        .progress-bar-container {
            width: 100%;
            background-color: #f3f3f3;
            height: 10px;
            margin-top: 20px;
            display: none; 
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #4caf50;
            transition: width 0.3s;
        }
        .full-width-iframe {
  width: 100%;
  height: 100vh; /* Adjust height as needed */
  border: none;
}

.homework-item img {
    max-width: 200px; /* Set maximum width for the image */
    max-height: 150px; /* Set maximum height for the image */
    width: auto; /* Maintain aspect ratio */
    height: auto; /* Maintain aspect ratio */
    display: block; /* Ensure the image does not overflow its container */
    margin-top: 10px; /* Add some space above the image */
    border: 1px solid #ddd; /* Optional: Add a border for better visibility */
    border-radius: 5px; /* Optional: Add rounded corners */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Optional: Add a subtle shadow */
}
.homework-item {
    background-color: #f9f9f9; /* Light background for the item */
    border: 1px solid #ddd; /* Subtle border for separation */
    border-radius: 8px; /* Rounded corners */
    padding: 15px; /* Space inside the container */
    margin-bottom: 15px; /* Space between homework items */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Soft shadow for depth */
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; /* Clean font */
    transition: transform 0.2s ease; /* Add hover effect */
}

.homework-item:hover {
    transform: translateY(-5px); /* Slight lift on hover */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Enhance shadow on hover */
}

.homework-item strong {
    color: #333; /* Darker color for labels */
    font-weight: bold;
    font-size: 14px;
}

.homework-item div {
    margin-bottom: 10px; /* Space between rows */
    line-height: 1.6; /* Better text spacing */
}

.homework-item .delete-btn {
    background-color: #ff4d4d; /* Red background for delete button */
    color: #fff; /* White text */
    border: none; /* Remove border */
    border-radius: 5px; /* Rounded corners */
    padding: 8px 12px; /* Button size */
    cursor: pointer; /* Pointer cursor */
    font-size: 14px; /* Button font size */
    transition: background-color 0.3s ease; /* Smooth hover effect */
}

.homework-item .delete-btn:hover {
    background-color: #e60000; /* Darker red on hover */
}

a {
    color: #f4f6f8; /* Set link color */
    text-decoration: none; /* Remove underline */
    font-weight: bold; /* Make text bold */
    transition: all 0.3s ease; /* Smooth transition for hover effect */
}

a:hover {
    color: #040427; /* Darker shade on hover */
    text-decoration: underline; /* Add underline on hover */
    transform: scale(1.05); /* Slightly enlarge on hover */
}

a:active {
    color: #004085; /* Even darker on click */
    transform: scale(1); /* Remove enlargement on click */
}


    </style>
</head>

<body>
    <div class="header">
        <!-- Circular Logo beside the title -->
        <a href="about.html"><div class="logo">
            <img src="default-profile.jpg" alt="KIK Classes Logo"></a>
        </div>
       <a href="about.html"> <div class="logo-text">KIK Classes</div></a>

        <!-- Profile container with the profile icon and welcome message -->
        <div class="profile-container">
            <div id="profile-icon">
                <img src="default-profile.jpg" alt="Profile Icon" id="profile-image">
            </div>
            <a href="profile.html"><span id="user-welcome">Welcome, User!</span></a>
        </div>
    </div>

    <!-- Thought of the Day (quote) box -->
    <div id="quote" class="quote">Loading quote...</div>

    <!-- Homework Section -->
    <div class="homework-section">
        <h2>Homework     <i class="fa-solid fa-book-open"></i></h2>
        <h4 style="color: #676666;">TEACHER MUST ENTER HOMEWORK BY CLICKING ON + ICON</h4>
        <button class="add-homework-btn" id="add-homework-btn"><i class="fa-solid fa-plus"></i></button>
        <div class="homework-list" id="homework-list">
            <!-- Homework items will be added here -->
        </div>
    </div>

    <!-- Modal for Adding Homework -->
    <div class="modal" id="homework-modal">
        <div class="modal-content">
            <h3><i class="fa-solid fa-book-open"></i>    Add Homework</h3>
            <label for="subject">Select Subject:</label>
            <select id="subject">
                <option value="science">Science</option>
                <option value="maths">Maths</option>
                <option value="sst">SST</option>
                <option value="hindi">Hindi</option>
                <option value="english">English</option>
            </select>
            <label for="homework-details"> <i class="fa-solid fa-book-open"></i>    Homework Details:</label>
            <textarea id="homework-details" rows="4"></textarea>
            <label for="file-attachment">Attach File <i class="fa-solid fa-paperclip"></i> (Optional):</label>
            <input type="file" id="file-attachment">
            <label for="passcode">Enter Passcode:</label>
            <input type="password" id="passcode" placeholder="Enter Passcode">
            <button id="submit-homework">Submit Homework</button>
            <button id="close-modal">Cancel</button>
        </div>
    </div>

    <iframe src="hw.html" frameborder="0" class="full-width-iframe"></iframe>

    
    <!-- Taskbar with icons -->
    <div class="taskbar">
        <div class="status-bar-item"><a href="INDEX.HTML"><i class="fas fa-house"></i></a></div>
        <div class="status-bar-item"><a href="chat.html"><i class="fas fa-comment"></i></a></div>
        <div class="status-bar-item"><a href="s_material.html"><i class="fas fa-book"></i></a></div>
        <div class="status-bar-item"><a href="https://www.youtube.com/@KIK_CLASSES"><i class="fa-brands fa-youtube"></i></a></div>
        <div class="status-bar-item"><a href="pay.html"><i class="fa-solid fa-indian-rupee-sign"></i></a></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, orderBy, query } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js";

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyCYY2GQqS0tCXb7Oxw8AWXhpexq9e8VRUs",
    authDomain: "aspirehub-32863.firebaseapp.com",
    projectId: "aspirehub-32863",
    storageBucket: "aspirehub-32863.appspot.com",
    messagingSenderId: "686810111182",
    appId: "1:686810111182:web:4290b4b1b6e64934ec449f",
    measurementId: "G-KX41R0SSMY"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app); // Initialize Firestore
const auth = getAuth(app); // Initialize Auth
const storage = getStorage(app); // Initialize Firebase Storage

    
        // Manual list of 10 motivational quotes
        const quotes = [
            "The only way to do great work is to love what you do. - Steve Jobs",
            "Success is not the key to happiness. Happiness is the key to success. - Albert Schweitzer",
            "Believe you can and you're halfway there. - Theodore Roosevelt",
            "Don't watch the clock; do what it does. Keep going. - Sam Levenson",
            "Your time is limited, so don’t waste it living someone else’s life. - Steve Jobs",
            "The harder you work for something, the greater you’ll feel when you achieve it. - Anonymous",
            "Dream it. Wish it. Do it. - Anonymous",
            "It’s not whether you get knocked down, it’s whether you get up. - Vince Lombardi",
            "The future belongs to those who believe in the beauty of their dreams. - Eleanor Roosevelt",
            "Success is the sum of small efforts, repeated day in and day out. - Robert Collier"
        ];
    
        // Function to get the current quote index based on time
        function getQuoteIndex() {
            const lastQuoteChange = localStorage.getItem("lastQuoteChange");
            const currentTime = new Date().getTime();
    
            // If it's been 12 hours or more, change the quote
            if (!lastQuoteChange || currentTime - lastQuoteChange >= 12 * 60 * 60 * 1000) {
                localStorage.setItem("lastQuoteChange", currentTime);
                return Math.floor(Math.random() * quotes.length); // Get a random quote index
            }
    
            // Otherwise, show the same quote as the last time
            return localStorage.getItem("lastQuoteIndex");
        }
    
        // Function to set the current quote
        function setQuote() {
            const index = getQuoteIndex();
            document.getElementById("quote").textContent = quotes[index];
            localStorage.setItem("lastQuoteIndex", index); // Store the current quote index
        }
    
        // Call setQuote on page load
        setQuote();
    
        // Homework Modal and button
        const addHomeworkBtn = document.getElementById("add-homework-btn");
        const homeworkModal = document.getElementById("homework-modal");
        const closeModalBtn = document.getElementById("close-modal");
        const submitHomeworkBtn = document.getElementById("submit-homework");
        const subjectInput = document.getElementById("subject");
        const detailsInput = document.getElementById("homework-details");
        const fileInput = document.getElementById("file-attachment");
        const passcodeInput = document.getElementById("passcode");
        const homeworkList = document.getElementById("homework-list");
    
        // Open the modal when "+" button is clicked
        addHomeworkBtn.addEventListener("click", () => {
            homeworkModal.style.display = "block";
        });
    
        // Close the modal when cancel is clicked
        closeModalBtn.addEventListener("click", () => {
            homeworkModal.style.display = "none";
        });
    
        // Submit Homework to Firestore
        submitHomeworkBtn.addEventListener("click", async () => {
      const subject = subjectInput.value;
      const details = detailsInput.value;
      const file = fileInput.files[0]; // Optional file
      const passcode = passcodeInput.value;
  
      if (passcode === "9090") {
          try {
              let fileURL = "";
              if (file) {
                  // Upload the file to Firebase Storage
                  const storageRef = ref(storage, `homework/${file.name}`);
                  const uploadResult = await uploadBytes(storageRef, file);
                  fileURL = await getDownloadURL(uploadResult.ref); // Get the URL of the uploaded file
              }
  
              // Add homework to Firestore
              await addDoc(collection(db, "homework"), {
                  subject,
                  details,
                  fileURL, // Save the URL of the file in Firestore
                  timestamp: new Date(),
              });
  
              alert("Homework added successfully!");
              homeworkModal.style.display = "none"; // Close modal after submission
              loadHomework(); // Reload homework list
          } catch (error) {
              alert("Error adding homework: " + error.message);
          }
      } else {
          alert("Incorrect passcode.");
      }
  });
  
  // Updated loadHomework function
  // Updated loadHomework function
  // Updated loadHomework function with timestamp display
async function loadHomework() {
    const q = query(collection(db, "homework"), orderBy("timestamp", "desc"));
    const querySnapshot = await getDocs(q);
    homeworkList.innerHTML = ""; // Clear existing homework list

    querySnapshot.forEach((docSnapshot) => {
        const homeworkData = docSnapshot.data();
        const homeworkId = docSnapshot.id;
        const homeworkElement = document.createElement("div");
        homeworkElement.classList.add("homework-item");

        let fileDisplay = "";  // Variable to hold file display HTML
        let formattedDate = "";  // Variable to hold formatted date and time

        if (homeworkData.timestamp) {
            // Format the timestamp into a readable date
            const timestamp = homeworkData.timestamp.toDate(); // Firestore Timestamp to JS Date
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
            formattedDate = timestamp.toLocaleString('en-US', options); // Format the date and time
        }

        if (homeworkData.fileURL) {
            // Extracting the file name from the URL and decoding it
            const fileName = decodeURIComponent(homeworkData.fileURL.split('/').pop().split('?')[0]);

            // Display filename beside the download link
            fileDisplay = `<strong style="color:black; " ><i class="fa-solid fa-paperclip"></i> file:</strong> <a href="${homeworkData.fileURL}" target="_blank">Download File</a> - ${fileName}`;
        }

        homeworkElement.innerHTML = `
            <div>
                <strong><i class="fa-solid fa-bookmark"></i>  Subject:</strong> ${homeworkData.subject}<br>
                <strong><i class="fa-solid fa-circle-info"></i>  Details:</strong> ${homeworkData.details}<br>
                ${fileDisplay} <!-- Display the file name with download link -->
                <br><strong style=" color: #007bff; font-size: 14px;">Uploaded On:</strong> ${formattedDate} <!-- Display the timestamp -->
            </div>
            <button class="delete-btn" data-id="${homeworkId}"><i class="fa-solid fa-delete-left"></i></button>
        `;

        const deleteBtn = homeworkElement.querySelector(".delete-btn");
        deleteBtn.addEventListener("click", async (e) => {
            const homeworkId = e.target.dataset.id;
            const passcode = prompt("Enter passcode to delete homework:");

            if (passcode === "9090") {
                try {
                    const homeworkDocRef = doc(db, "homework", homeworkId); // Correctly reference the document
                    await deleteDoc(homeworkDocRef); // Delete the homework document
                    alert("Homework deleted successfully!");
                    loadHomework(); // Reload homework list after deletion
                } catch (error) {
                    alert("Error deleting homework: " + error.message);
                }
            } else {
                alert("Incorrect passcode.");
            }
        });

        homeworkList.appendChild(homeworkElement);
    });
}





  
    
        // Load homework when the page is loaded
        window.onload = loadHomework;
    
        // Authentication
        onAuthStateChanged(auth, (user) => {
            if (user) {
               
                const userProfileImage = user.photoURL || "default-profile.jpg";  // default if no profile image
                document.getElementById("profile-image").src = userProfileImage;
     // Display user name
                document.getElementById("user-welcome").innerText = ` ${user.displayName || user.email}`;
                // Set the profile image if the user is logged in via Google
                // Add event listener for profile icon click to redirect to profile page
                document.getElementById("profile-icon").addEventListener("click", () => {
                    window.location.href = "profile.html";
                });
            } else {
                // User is not logged in
                alert("Please login to access this page.");
                window.location.href = "login.html";
            }
        });
  
        // bawwaaaalllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll
  
        
    </script>
  


    
</body>

</html>
